<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Model | json-joy</title><meta name="description" content="Documentation for json-joy"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">json-joy</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../index.html">json-joy</a></li><li><a href="../modules/json_crdt.html">json-crdt</a></li><li><a href="json_crdt.Model.html">Model</a></li></ul><h1>Class Model&lt;N&gt;</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p>In instance of Model class represents the underlying data structure,
i.e. model, of the JSON CRDT document.</p>
</div><div class="tsd-comment tsd-typography"></div></section> <section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="N" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">N</span><span class="tsd-signature-keyword"> extends </span><a href="../interfaces/json_crdt.JsonNode.html" class="tsd-signature-type tsd-kind-interface">JsonNode</a> = <a href="../interfaces/json_crdt.JsonNode.html" class="tsd-signature-type tsd-kind-interface">JsonNode</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></span></li></ul></section> <section class="tsd-panel"><h4>Implements</h4><ul class="tsd-hierarchy"><li><span class="tsd-signature-type">Printable</span></li></ul></section><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L25">src/json-crdt/model/Model.ts:25</a></li></ul></aside><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><details class="tsd-index-content tsd-index-accordion" open><summary class="tsd-accordion-summary tsd-index-summary"><h5 class="tsd-index-heading uppercase" role="button" aria-expanded="false" tabIndex="0"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-chevronSmall"></use></svg> Index</h5></summary><div class="tsd-accordion-details"><section class="tsd-index-section"><h3 class="tsd-index-heading">Constructors</h3><div class="tsd-index-list"><a href="json_crdt.Model.html#constructor" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Properties</h3><div class="tsd-index-list"><a href="json_crdt.Model.html#clock" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>clock</span></a>
<a href="json_crdt.Model.html#onbeforepatch" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>onbeforepatch?</span></a>
<a href="json_crdt.Model.html#onbeforereset" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>onbeforereset?</span></a>
<a href="json_crdt.Model.html#onpatch" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>onpatch?</span></a>
<a href="json_crdt.Model.html#onreset" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>onreset?</span></a>
<a href="json_crdt.Model.html#root" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>root</span></a>
<a href="json_crdt.Model.html#sid" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>sid</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Accessors</h3><div class="tsd-index-list"><a href="json_crdt.Model.html#api" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-262144"></use></svg><span>api</span></a>
<a href="json_crdt.Model.html#find" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-262144"></use></svg><span>find</span></a>
<a href="json_crdt.Model.html#s" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-262144"></use></svg><span>s</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Methods</h3><div class="tsd-index-list"><a href="json_crdt.Model.html#applyBatch" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>apply<wbr/>Batch</span></a>
<a href="json_crdt.Model.html#applyLocalPatch" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>apply<wbr/>Local<wbr/>Patch</span></a>
<a href="json_crdt.Model.html#applyPatch" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>apply<wbr/>Patch</span></a>
<a href="json_crdt.Model.html#clone" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>clone</span></a>
<a href="json_crdt.Model.html#fork" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>fork</span></a>
<a href="json_crdt.Model.html#reset" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>reset</span></a>
<a href="json_crdt.Model.html#rndSid" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>rnd<wbr/>Sid</span></a>
<a href="json_crdt.Model.html#setSchema" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>set<wbr/>Schema</span></a>
<a href="json_crdt.Model.html#setSid" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>set<wbr/>Sid</span></a>
<a href="json_crdt.Model.html#toBinary" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>to<wbr/>Binary</span></a>
<a href="json_crdt.Model.html#toString" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>to<wbr/>String</span></a>
<a href="json_crdt.Model.html#view" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>view</span></a>
<a href="json_crdt.Model.html#create" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>create</span></a>
<a href="json_crdt.Model.html#fromBinary" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>from<wbr/>Binary</span></a>
<a href="json_crdt.Model.html#fromPatches" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>from<wbr/>Patches</span></a>
<a href="json_crdt.Model.html#load" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>load</span></a>
<a href="json_crdt.Model.html#withLogicalClock" class="tsd-index-link deprecated"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>with<wbr/>Logical<wbr/>Clock</span></a>
<a href="json_crdt.Model.html#withServerClock" class="tsd-index-link deprecated"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>with<wbr/>Server<wbr/>Clock</span></a>
</div></section></div></details></section></section><section class="tsd-panel-group tsd-member-group"><h2>Constructors</h2><section class="tsd-panel tsd-member"><a id="constructor" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>constructor</span><a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="constructor.new_Model" class="tsd-anchor"></a><span class="tsd-kind-constructor-signature">new <wbr/>Model</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#constructor.new_Model.N-1">N</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">clockVector</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#constructor.new_Model.N-1">N</a><span class="tsd-signature-symbol">&gt;</span><a href="#constructor.new_Model" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="constructor.new_Model.N-1" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">N</span><span class="tsd-signature-keyword"> extends </span><a href="../interfaces/json_crdt.JsonNode.html" class="tsd-signature-type tsd-kind-interface">JsonNode</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">unknown</span><span class="tsd-signature-symbol">&gt;</span> = <a href="../interfaces/json_crdt.JsonNode.html" class="tsd-signature-type tsd-kind-interface">JsonNode</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">clockVector</span>: <a href="../interfaces/json_crdt.IClockVector.html" class="tsd-signature-type tsd-kind-interface">IClockVector</a></span></li></ul></div><h4 class="tsd-returns-title">Returns <a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#constructor.new_Model.N-1">N</a><span class="tsd-signature-symbol">&gt;</span></h4><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L249">src/json-crdt/model/Model.ts:249</a></li></ul></aside></li></ul></section></section><section class="tsd-panel-group tsd-member-group"><h2>Properties</h2><section class="tsd-panel tsd-member"><a id="clock" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>clock</span><a href="#clock" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">clock</span><span class="tsd-signature-symbol">:</span> <a href="../interfaces/json_crdt.IClockVector.html" class="tsd-signature-type tsd-kind-interface">IClockVector</a></div><div class="tsd-comment tsd-typography"><p>Clock that keeps track of logical timestamps of the current editing session
and logical clocks of all known peers.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L230">src/json-crdt/model/Model.ts:230</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="onbeforepatch" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagOptional">Optional</code> <span>onbeforepatch</span><a href="#onbeforepatch" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">onbeforepatch</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">patch</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> = undefined</span></div><div class="tsd-comment tsd-typography"><p>Callback called before every <code>applyPatch</code> call.</p>
</div><div class="tsd-type-declaration"><h4>Type declaration</h4><ul class="tsd-parameters"><li class="tsd-parameter-signature"><ul class="tsd-signatures"><li class="tsd-signature" id="onbeforepatch.__type.__type-1"><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">patch</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li><li class="tsd-description"><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">patch</span>: <a href="json_crdt.Patch.html" class="tsd-signature-type tsd-kind-class">Patch</a></span></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></li></ul></div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L302">src/json-crdt/model/Model.ts:302</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="onbeforereset" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagOptional">Optional</code> <span>onbeforereset</span><a href="#onbeforereset" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">onbeforereset</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> = undefined</span></div><div class="tsd-comment tsd-typography"><p>Callback called before model isi reset using the <code>.reset()</code> method.</p>
</div><div class="tsd-type-declaration"><h4>Type declaration</h4><ul class="tsd-parameters"><li class="tsd-parameter-signature"><ul class="tsd-signatures"><li class="tsd-signature" id="onbeforereset.__type-2.__type-3"><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li><li class="tsd-description"><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></li></ul></div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L499">src/json-crdt/model/Model.ts:499</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="onpatch" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagOptional">Optional</code> <span>onpatch</span><a href="#onpatch" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">onpatch</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">patch</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> = undefined</span></div><div class="tsd-comment tsd-typography"><p>Callback called after every <code>applyPatch</code> call.</p>
</div><div class="tsd-type-declaration"><h4>Type declaration</h4><ul class="tsd-parameters"><li class="tsd-parameter-signature"><ul class="tsd-signatures"><li class="tsd-signature" id="onpatch.__type-4.__type-5"><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">patch</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li><li class="tsd-description"><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">patch</span>: <a href="json_crdt.Patch.html" class="tsd-signature-type tsd-kind-class">Patch</a></span></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></li></ul></div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L307">src/json-crdt/model/Model.ts:307</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="onreset" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagOptional">Optional</code> <span>onreset</span><a href="#onreset" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">onreset</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> = undefined</span></div><div class="tsd-comment tsd-typography"><p>Callback called after model has been reset using the <code>.reset()</code> method.</p>
</div><div class="tsd-type-declaration"><h4>Type declaration</h4><ul class="tsd-parameters"><li class="tsd-parameter-signature"><ul class="tsd-signatures"><li class="tsd-signature" id="onreset.__type-6.__type-7"><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li><li class="tsd-description"><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></li></ul></div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L504">src/json-crdt/model/Model.ts:504</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="root" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>root</span><a href="#root" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">root</span><span class="tsd-signature-symbol">:</span> <a href="json_crdt.RootNode.html" class="tsd-signature-type tsd-kind-class">RootNode</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#constructor.new_Model.N-1">N</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol"> = ...</span></div><div class="tsd-comment tsd-typography"><p>Root of the JSON document is implemented as Last Write Wins Register,
so that the JSON document does not necessarily need to be an object. The
JSON document can be any JSON value.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L224">src/json-crdt/model/Model.ts:224</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="sid" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagStatic">Static</code> <code class="tsd-tag ts-flagReadonly">Readonly</code> <span>sid</span><a href="#sid" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">sid</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> = randomSessionId</span></div><div class="tsd-comment tsd-typography"><p>Generates a random session ID. Use this method to generate a session ID
for a new user. Store the session ID in the user&#39;s browser or device once
and reuse it for all editing sessions of that user.</p>
<p>Generating a new session ID for each editing session will work, however,
that is not recommended. If a user generates a new session ID for each
editing session, the session clock table will grow indefinitely.</p>
</div><div class="tsd-type-declaration"><h4>Type declaration</h4><ul class="tsd-parameters"><li class="tsd-parameter-signature"><ul class="tsd-signatures"><li class="tsd-signature" id="sid.__type-8.__type-9"><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span></li><li class="tsd-description"><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">number</span></h4></li></ul></li></ul></div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L35">src/json-crdt/model/Model.ts:35</a></li></ul></aside></section></section><section class="tsd-panel-group tsd-member-group"><h2>Accessors</h2><section class="tsd-panel tsd-member"><a id="api" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>api</span><a href="#api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature" id="api.api-1"><span class="tsd-signature-keyword">get</span> api<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="json_crdt.ModelApi.html" class="tsd-signature-type tsd-kind-class">ModelApi</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#constructor.new_Model.N-1">N</a><span class="tsd-signature-symbol">&gt;</span></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>API for applying local changes to the current document.</p>
</div><h4 class="tsd-returns-title">Returns <a href="json_crdt.ModelApi.html" class="tsd-signature-type tsd-kind-class">ModelApi</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#constructor.new_Model.N-1">N</a><span class="tsd-signature-symbol">&gt;</span></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L260">src/json-crdt/model/Model.ts:260</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="find" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>find</span><a href="#find" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature" id="find.find-1"><span class="tsd-signature-keyword">get</span> find<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">ProxyNodeVal</span><span class="tsd-signature-symbol">&lt;</span><a href="json_crdt.RootNode.html" class="tsd-signature-type tsd-kind-class">RootNode</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#constructor.new_Model.N-1">N</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Experimental node retrieval API using proxy objects.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">ProxyNodeVal</span><span class="tsd-signature-symbol">&lt;</span><a href="json_crdt.RootNode.html" class="tsd-signature-type tsd-kind-class">RootNode</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#constructor.new_Model.N-1">N</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L268">src/json-crdt/model/Model.ts:268</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="s" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>s</span><a href="#s" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature" id="s.s-1"><span class="tsd-signature-keyword">get</span> s<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">JsonNodeToProxyNode</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#constructor.new_Model.N-1">N</a><span class="tsd-signature-symbol">&gt;</span></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Experimental node retrieval API using proxy objects. Returns a strictly
typed proxy wrapper around the value of the root node.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">JsonNodeToProxyNode</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#constructor.new_Model.N-1">N</a><span class="tsd-signature-symbol">&gt;</span></h4><div class="tsd-comment tsd-typography"><h4>Todo</h4><p>consider renaming this to <code>_</code>.</p>
</div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L278">src/json-crdt/model/Model.ts:278</a></li></ul></aside></li></ul></section></section><section class="tsd-panel-group tsd-member-group"><h2>Methods</h2><section class="tsd-panel tsd-member"><a id="applyBatch" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>apply<wbr/>Batch</span><a href="#applyBatch" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="applyBatch.applyBatch-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">apply<wbr/>Batch</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">patches</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><a href="#applyBatch.applyBatch-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Applies a batch of patches to the document.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">patches</span>: <a href="json_crdt.Patch.html" class="tsd-signature-type tsd-kind-class">Patch</a><span class="tsd-signature-symbol">[]</span></span><div class="tsd-comment tsd-typography"><p>A batch, i.e. an array of patches.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L294">src/json-crdt/model/Model.ts:294</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="applyLocalPatch" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>apply<wbr/>Local<wbr/>Patch</span><a href="#applyLocalPatch" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="applyLocalPatch.applyLocalPatch-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">apply<wbr/>Local<wbr/>Patch</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">patch</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><a href="#applyLocalPatch.applyLocalPatch-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Works like <code>applyPatch</code>, but is intended to be used by the local client
for locally generated patches. It checks if the model clock is ahead of
the patch clock and rebases the patch if necessary.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">patch</span>: <a href="json_crdt.Patch.html" class="tsd-signature-type tsd-kind-class">Patch</a></span><div class="tsd-comment tsd-typography"><p>A patch to apply to the document.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L316">src/json-crdt/model/Model.ts:316</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="applyPatch" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>apply<wbr/>Patch</span><a href="#applyPatch" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="applyPatch.applyPatch-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">apply<wbr/>Patch</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">patch</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><a href="#applyPatch.applyPatch-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Applies a single patch to the document. All mutations to the model must go
through this method. (With the only exception of local changes through API,
which have an alternative path.)</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">patch</span>: <a href="json_crdt.Patch.html" class="tsd-signature-type tsd-kind-class">Patch</a></span><div class="tsd-comment tsd-typography"><p>A patch to apply to the document.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L335">src/json-crdt/model/Model.ts:335</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="clone" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>clone</span><a href="#clone" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="clone.clone-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">clone</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#constructor.new_Model.N-1">N</a><span class="tsd-signature-symbol">&gt;</span><a href="#clone.clone-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Creates a copy of this model with the same session ID.</p>
</div><h4 class="tsd-returns-title">Returns <a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#constructor.new_Model.N-1">N</a><span class="tsd-signature-symbol">&gt;</span></h4><p>A copy of this model with the same session ID.</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L492">src/json-crdt/model/Model.ts:492</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="fork" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>fork</span><a href="#fork" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="fork.fork-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">fork</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">sessionId</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#constructor.new_Model.N-1">N</a><span class="tsd-signature-symbol">&gt;</span><a href="#fork.fork-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Creates a copy of this model with a new session ID. If the session ID is
not provided, a random session ID is generated.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">sessionId</span>: <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> = ...</span></span><div class="tsd-comment tsd-typography"><p>Session ID to use for the new model.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#constructor.new_Model.N-1">N</a><span class="tsd-signature-symbol">&gt;</span></h4><p>A copy of this model with a new session ID.</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L479">src/json-crdt/model/Model.ts:479</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="reset" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>reset</span><a href="#reset" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="reset.reset-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">reset</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">to</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><a href="#reset.reset-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Resets the model to equivalent state of another model.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">to</span>: <a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#constructor.new_Model.N-1">N</a><span class="tsd-signature-symbol">&gt;</span></span></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L509">src/json-crdt/model/Model.ts:509</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="rndSid" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>rnd<wbr/>Sid</span><a href="#rndSid" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="rndSid.rndSid-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">rnd<wbr/>Sid</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span><a href="#rndSid.rndSid-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Use this method to generate a random session ID for an existing document.
It checks for the uniqueness of the session ID given the current peers in
the document. This reduces the chance of collision substantially.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">number</span></h4><p>A random session ID that is not used by any peer in the current
    document.</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L45">src/json-crdt/model/Model.ts:45</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="setSchema" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>set<wbr/>Schema</span><a href="#setSchema" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="setSchema.setSchema-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">set<wbr/>Schema</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#setSchema.setSchema-1.S-2">S</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">schema</span>, <span class="tsd-kind-parameter">useGlobalSession</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">SchemaToJsonNode</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#setSchema.setSchema-1.S-2">S</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><a href="#setSchema.setSchema-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Strictly types the model and sets the default value of the model, if
the document is empty.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="setSchema.setSchema-1.S-2" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">S</span><span class="tsd-signature-keyword"> extends </span><a href="json_crdt.NodeBuilder.html" class="tsd-signature-type tsd-kind-class">NodeBuilder</a></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">schema</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#setSchema.setSchema-1.S-2">S</a></span><div class="tsd-comment tsd-typography"><p>The schema to set for this model.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">useGlobalSession</span>: <span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol"> = true</span></span></li></ul></div><h4 class="tsd-returns-title">Returns <a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">SchemaToJsonNode</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#setSchema.setSchema-1.S-2">S</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4><p>Strictly typed model.</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L567">src/json-crdt/model/Model.ts:567</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="setSid" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>set<wbr/>Sid</span><a href="#setSid" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="setSid.setSid-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">set<wbr/>Sid</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">sid</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><a href="#setSid.setSid-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Changes the session ID of the model. By modifying the attached clock vector
of the model. Be careful when changing the session ID of the model, as this
is an advanced operation.</p>
<p>Use the <a href="json_crdt.Model.html#load" class="tsd-kind-method">Model.load</a> method to load a model with the the right session
ID, instead of changing the session ID of the model. When in doubt, use the
<a href="json_crdt.Model.html#fork" class="tsd-kind-method">Model.fork</a> method to create a new model with the right session ID.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">sid</span>: <span class="tsd-signature-type">number</span></span><div class="tsd-comment tsd-typography"><p>The new session ID to set for the model.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L590">src/json-crdt/model/Model.ts:590</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="toBinary" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>to<wbr/>Binary</span><a href="#toBinary" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="toBinary.toBinary-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">to<wbr/>Binary</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Uint8Array</span><a href="#toBinary.toBinary-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Serialize this model using &quot;binary&quot; structural encoding.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Uint8Array</span></h4><p>This model encoded in octets.</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L552">src/json-crdt/model/Model.ts:552</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="toString" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>to<wbr/>String</span><a href="#toString" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="toString.toString-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">to<wbr/>String</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">tab</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><a href="#toString.toString-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">tab</span>: <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> = &#39;&#39;</span></span></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">string</span></h4><aside class="tsd-sources"><p>Implementation of Printable.toString</p><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L601">src/json-crdt/model/Model.ts:601</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="view" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>view</span><a href="#view" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="view.view-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">view</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Readonly</span><span class="tsd-signature-symbol">&lt;</span><a href="../types/json_crdt.JsonNodeView.html" class="tsd-signature-type tsd-kind-type-alias">JsonNodeView</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#constructor.new_Model.N-1">N</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><a href="#view.view-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Returns the view of the model.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Readonly</span><span class="tsd-signature-symbol">&lt;</span><a href="../types/json_crdt.JsonNodeView.html" class="tsd-signature-type tsd-kind-type-alias">JsonNodeView</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#constructor.new_Model.N-1">N</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4><p>JSON/CBOR of the model.</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L543">src/json-crdt/model/Model.ts:543</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="create" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagStatic">Static</code> <code class="tsd-tag ts-flagReadonly">Readonly</code> <span>create</span><a href="#create" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="create.create-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">create</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#create.create-1.S-3">S</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">schema</span><span class="tsd-signature-symbol">?</span>, <span class="tsd-kind-parameter">sidOrClock</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">SchemaToJsonNode</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#create.create-1.S-3">S</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><a href="#create.create-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Create a new JSON CRDT model. If a schema is provided, the model is
strictly typed and the default value of the model is set to the default
value of the schema.</p>
<p>By default, the model is created with a random session ID and is using
a logical clock. It is also possible to create a model which uses a server
clock by providing the session ID <code>SESSION.SERVER</code> (1).</p>
<a id="md:examples" class="tsd-anchor"></a><h3><a href="#md:examples">Examples</a></h3><p>Create a basic model, without schema and default value:</p>
<pre><code class="language-ts"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">model</span><span class="hl-1"> = </span><span class="hl-0">Model</span><span class="hl-1">.</span><span class="hl-2">create</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<p>Create a strictly typed model with a schema and default value:</p>
<pre><code class="language-ts"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">schema</span><span class="hl-1"> = </span><span class="hl-0">s</span><span class="hl-1">.</span><span class="hl-2">obj</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">ticker:</span><span class="hl-1"> </span><span class="hl-0">s</span><span class="hl-1">.</span><span class="hl-2">con</span><span class="hl-1">&lt;</span><span class="hl-5">string</span><span class="hl-1">&gt;(</span><span class="hl-4">&#39;BODEN&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-0">s</span><span class="hl-1">.</span><span class="hl-2">str</span><span class="hl-1">(</span><span class="hl-4">&#39;Jeo Boden&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-0">tags:</span><span class="hl-1"> </span><span class="hl-0">s</span><span class="hl-1">.</span><span class="hl-2">arr</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">s</span><span class="hl-1">.</span><span class="hl-2">str</span><span class="hl-1">(</span><span class="hl-4">&#39;token&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">  ),</span><br/><span class="hl-1">});</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">model</span><span class="hl-1"> = </span><span class="hl-0">Model</span><span class="hl-1">.</span><span class="hl-2">create</span><span class="hl-1">(</span><span class="hl-0">schema</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>Create a model with a custom session ID for your logical clock:</p>
<pre><code class="language-ts"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">schema</span><span class="hl-1"> = </span><span class="hl-0">s</span><span class="hl-1">.</span><span class="hl-2">str</span><span class="hl-1">(</span><span class="hl-4">&#39;&#39;</span><span class="hl-1">);</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">sid</span><span class="hl-1"> = </span><span class="hl-3">123456789</span><span class="hl-1">;</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">model</span><span class="hl-1"> = </span><span class="hl-0">Model</span><span class="hl-1">.</span><span class="hl-2">create</span><span class="hl-1">(</span><span class="hl-0">schema</span><span class="hl-1">, </span><span class="hl-0">sid</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>The session ID must be at least 65,536 or higher, <a href="https://jsonjoy.com/specs/json-crdt-patch/patch-document/logical-clock">see JSON CRDT Patch
specification</a>.</p>
<p>To create a model with a server clock, use the <code>SESSION.SERVER</code>, which is
equal to 1:</p>
<pre><code class="language-ts"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">model</span><span class="hl-1"> = </span><span class="hl-0">Model</span><span class="hl-1">.</span><span class="hl-2">create</span><span class="hl-1">(</span><span class="hl-6">undefined</span><span class="hl-1">, </span><span class="hl-8">SESSION</span><span class="hl-1">.</span><span class="hl-8">SERVER</span><span class="hl-1">);</span><br/><span class="hl-7">// or</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">model</span><span class="hl-1"> = </span><span class="hl-0">Model</span><span class="hl-1">.</span><span class="hl-2">create</span><span class="hl-1">(</span><span class="hl-6">undefined</span><span class="hl-1">, </span><span class="hl-3">1</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>Finally, you can create a model with your clock vector:</p>
<pre><code class="language-ts"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">clock</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-2">ClockVector</span><span class="hl-1">(</span><span class="hl-3">123456789</span><span class="hl-1">, </span><span class="hl-3">1</span><span class="hl-1">);</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-8">model</span><span class="hl-1"> = </span><span class="hl-0">Model</span><span class="hl-1">.</span><span class="hl-2">create</span><span class="hl-1">(</span><span class="hl-6">undefined</span><span class="hl-1">, </span><span class="hl-0">clock</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="create.create-1.S-3" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">S</span><span class="tsd-signature-keyword"> extends </span><a href="json_crdt.NodeBuilder.html" class="tsd-signature-type tsd-kind-class">NodeBuilder</a></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><code class="tsd-tag ts-flagOptional">Optional</code> <span class="tsd-kind-parameter">schema</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#create.create-1.S-3">S</a></span><div class="tsd-comment tsd-typography"><p>The schema (typing and default value) to set for this model.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">sidOrClock</span>: <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> | </span><a href="json_crdt.ClockVector.html" class="tsd-signature-type tsd-kind-class">ClockVector</a><span class="tsd-signature-symbol"> = ...</span></span><div class="tsd-comment tsd-typography"><p>Session ID to use for local operations. Defaults to a random
       session ID generated by <a href="json_crdt.Model.html#sid" class="tsd-kind-property">Model.sid</a>.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">SchemaToJsonNode</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#create.create-1.S-3">S</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4><p>A strictly typed model.</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L150">src/json-crdt/model/Model.ts:150</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="fromBinary" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagStatic">Static</code> <code class="tsd-tag ts-flagReadonly">Readonly</code> <span>from<wbr/>Binary</span><a href="#fromBinary" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="fromBinary.fromBinary-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">from<wbr/>Binary</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">data</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/json_crdt.JsonNode.html" class="tsd-signature-type tsd-kind-interface">JsonNode</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><a href="#fromBinary.fromBinary-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Decodes a model from a &quot;binary&quot; structural encoding.</p>
<p>Use <a href="json_crdt.Model.html#load" class="tsd-kind-method">Model.load</a> instead, if you want to set the session ID of the
model and the right schema for the model, during the de-serialization.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">data</span>: <span class="tsd-signature-type">Uint8Array</span></span><div class="tsd-comment tsd-typography"><p>Binary blob of a model encoded using &quot;binary&quot; structural
       encoding.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/json_crdt.JsonNode.html" class="tsd-signature-type tsd-kind-interface">JsonNode</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4><p>An instance of a model.</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L175">src/json-crdt/model/Model.ts:175</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="fromPatches" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagStatic">Static</code> <span>from<wbr/>Patches</span><a href="#fromPatches" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="fromPatches.fromPatches-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">from<wbr/>Patches</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">patches</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/json_crdt.JsonNode.html" class="tsd-signature-type tsd-kind-interface">JsonNode</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><a href="#fromPatches.fromPatches-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Instantiates a model from a collection of patches. The patches are applied
to the model in the order they are provided. The session ID of the model is
set to the session ID of the first patch.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">patches</span>: <a href="json_crdt.Patch.html" class="tsd-signature-type tsd-kind-class">Patch</a><span class="tsd-signature-symbol">[]</span></span><div class="tsd-comment tsd-typography"><p>A collection of initial patches to apply to the model.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/json_crdt.JsonNode.html" class="tsd-signature-type tsd-kind-interface">JsonNode</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4><p>A model with the patches applied.</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L208">src/json-crdt/model/Model.ts:208</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="load" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagStatic">Static</code> <code class="tsd-tag ts-flagReadonly">Readonly</code> <span>load</span><a href="#load" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="load.load-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">load</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#load.load-1.S-4">S</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">data</span>, <span class="tsd-kind-parameter">sid</span><span class="tsd-signature-symbol">?</span>, <span class="tsd-kind-parameter">schema</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">SchemaToJsonNode</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#load.load-1.S-4">S</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><a href="#load.load-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Un-serializes a model from &quot;binary&quot; structural encoding. The session ID of
the model is set to the provided session ID <code>sid</code>, or the default session
ID of the un-serialized model is used.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="load.load-1.S-4" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">S</span><span class="tsd-signature-keyword"> extends </span><a href="json_crdt.NodeBuilder.html" class="tsd-signature-type tsd-kind-class">NodeBuilder</a></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">data</span>: <span class="tsd-signature-type">Uint8Array</span></span><div class="tsd-comment tsd-typography"><p>Binary blob of a model encoded using &quot;binary&quot; structural
       encoding.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag ts-flagOptional">Optional</code> <span class="tsd-kind-parameter">sid</span>: <span class="tsd-signature-type">number</span></span><div class="tsd-comment tsd-typography"><p>Session ID to set for the model.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag ts-flagOptional">Optional</code> <span class="tsd-kind-parameter">schema</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#load.load-1.S-4">S</a></span></li></ul></div><h4 class="tsd-returns-title">Returns <a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">SchemaToJsonNode</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="json_crdt.Model.html#load.load-1.S-4">S</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4><p>An instance of a model.</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L189">src/json-crdt/model/Model.ts:189</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="withLogicalClock" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagStatic">Static</code> <code class="tsd-tag ts-flagReadonly">Readonly</code> <span class="deprecated">with<wbr/>Logical<wbr/>Clock</span><a href="#withLogicalClock" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="withLogicalClock.withLogicalClock-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">with<wbr/>Logical<wbr/>Clock</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">clockOrSessionId</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/json_crdt.JsonNode.html" class="tsd-signature-type tsd-kind-interface">JsonNode</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><a href="#withLogicalClock.withLogicalClock-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Create a CRDT model which uses logical clock. Logical clock assigns a
logical timestamp to every node and operation. Logical timestamp consists
of a session ID and sequence number 2-tuple. Logical clocks allow to
sync peer-to-peer.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><code class="tsd-tag ts-flagOptional">Optional</code> <span class="tsd-kind-parameter">clockOrSessionId</span>: <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> | </span><a href="json_crdt.ClockVector.html" class="tsd-signature-type tsd-kind-class">ClockVector</a></span><div class="tsd-comment tsd-typography"><p>Logical clock to use.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/json_crdt.JsonNode.html" class="tsd-signature-type tsd-kind-interface">JsonNode</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4><p>CRDT model.</p>
<div class="tsd-comment tsd-typography"><h4>Deprecated</h4><p>Use <code>Model.create()</code> instead.</p>
</div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L66">src/json-crdt/model/Model.ts:66</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="withServerClock" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagStatic">Static</code> <code class="tsd-tag ts-flagReadonly">Readonly</code> <span class="deprecated">with<wbr/>Server<wbr/>Clock</span><a href="#withServerClock" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="withServerClock.withServerClock-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">with<wbr/>Server<wbr/>Clock</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">time</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/json_crdt.JsonNode.html" class="tsd-signature-type tsd-kind-interface">JsonNode</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><a href="#withServerClock.withServerClock-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Create a CRDT model which uses server clock. In this model a central server
timestamps each operation with a sequence number. Each timestamp consists
simply of a sequence number, which was assigned by a server. In this model
all operations are approved, persisted and re-distributed to all clients by
a central server.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">time</span>: <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> = 1</span></span><div class="tsd-comment tsd-typography"><p>Latest known server sequence number.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="json_crdt.Model.html" class="tsd-signature-type tsd-kind-class">Model</a><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/json_crdt.JsonNode.html" class="tsd-signature-type tsd-kind-interface">JsonNode</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4><p>CRDT model.</p>
<div class="tsd-comment tsd-typography"><h4>Deprecated</h4><p>Use <code>Model.create()</code> instead: <code>Model.create(undefined, SESSION.SERVER)</code>.</p>
</div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/streamich/json-joy/blob/813c22453df916d91de260f97f7c304b148f6890/src/json-crdt/model/Model.ts#L82">src/json-crdt/model/Model.ts:82</a></li></ul></aside></li></ul></section></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#constructor" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a><a href="#clock" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>clock</span></a><a href="#onbeforepatch" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>onbeforepatch</span></a><a href="#onbeforereset" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>onbeforereset</span></a><a href="#onpatch" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>onpatch</span></a><a href="#onreset" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>onreset</span></a><a href="#root" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>root</span></a><a href="#sid" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>sid</span></a><a href="#api" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-262144"></use></svg><span>api</span></a><a href="#find" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-262144"></use></svg><span>find</span></a><a href="#s" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-262144"></use></svg><span>s</span></a><a href="#applyBatch" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>apply<wbr/>Batch</span></a><a href="#applyLocalPatch" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>apply<wbr/>Local<wbr/>Patch</span></a><a href="#applyPatch" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>apply<wbr/>Patch</span></a><a href="#clone" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>clone</span></a><a href="#fork" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>fork</span></a><a href="#reset" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>reset</span></a><a href="#rndSid" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>rnd<wbr/>Sid</span></a><a href="#setSchema" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>set<wbr/>Schema</span></a><a href="#setSid" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>set<wbr/>Sid</span></a><a href="#toBinary" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>to<wbr/>Binary</span></a><a href="#toString" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>to<wbr/>String</span></a><a href="#view" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>view</span></a><a href="#create" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>create</span></a><ul><li><ul><li><ul><li><a href="#md:examples"><span>Examples</span></a></li></ul></li></ul></li></ul><a href="#fromBinary" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>from<wbr/>Binary</span></a><a href="#fromPatches" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>from<wbr/>Patches</span></a><a href="#load" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>load</span></a><a href="#withLogicalClock" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>with<wbr/>Logical<wbr/>Clock</span></a><a href="#withServerClock" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>with<wbr/>Server<wbr/>Clock</span></a></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../index.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>json-joy</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>